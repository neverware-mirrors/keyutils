From: Christian Kastner <ckk@debian.org>
Date: Mon, 26 May 2014 09:54:57 +0200
Subject: Remove RHEL-specific feature test

The release number comparison breaks  with sid's release number of "unstable".

Forwarded: no
Last-Update: 2019-02-09
---
 tests/keyctl/session/valid/runtest.sh | 15 ---------------
 1 file changed, 15 deletions(-)

Index: keyutils/tests/keyctl/session/valid/runtest.sh
===================================================================
--- keyutils.orig/tests/keyctl/session/valid/runtest.sh
+++ keyutils/tests/keyctl/session/valid/runtest.sh
@@ -9,21 +9,6 @@
 result=PASS
 echo "++++ BEGINNING TEST" >$OUTPUTFILE
 
-# describe the keyring created for an anonymous session
-if [ $OSDIST = RHEL ] && version_less_than $OSRELEASE 6
-then
-    marker "ANON SESSION"
-    new_session - keyctl rdescribe @s "@"
-    expect_key_rdesc rdesc "keyring@.*@.*@.*@_ses[^@]*\$"
-
-    # check the session keyring ID is shown
-    seskeyring="`tail -2 $OUTPUTFILE | head -1`"
-    if ! expr "$seskeyring" : "Joined session keyring: [0-9]*" >&/dev/null
-    then
-	failed
-    fi
-fi
-
 # describe the keyring created for a named session
 marker "NAMED SESSION"
 new_session qwerty keyctl rdescribe @s "@"
Index: keyutils/tests/prepare.inc.sh
===================================================================
--- keyutils.orig/tests/prepare.inc.sh
+++ keyutils/tests/prepare.inc.sh
@@ -83,11 +83,7 @@ fi
 # Work out whether the big_key type is supported by the kernel
 #
 have_big_key_type=0
-if [ $OSDIST = RHEL ] && ! version_less_than $OSRELEASE 7
-then
-    # big_key is backported to 3.10 for RHEL-7
-    have_big_key_type=1
-elif kernel_at_or_later_than 3.13-rc1
+if kernel_at_or_later_than 3.13-rc1
 then
     have_big_key_type=1
 fi
Index: keyutils/tests/keyctl/show/valid/runtest.sh
===================================================================
--- keyutils.orig/tests/keyctl/show/valid/runtest.sh
+++ keyutils/tests/keyctl/show/valid/runtest.sh
@@ -30,8 +30,7 @@ then
     failed
 fi
 
-if [ $OSDIST = RHEL ] && ! version_less_than $OSRELEASE 6.6 ||
-   keyutils_at_or_later_than 1.5.6
+if keyutils_at_or_later_than 1.5.6
 then
     # should be eight lines in the output (banner + session + 6 keyrings)
     marker "COUNT LINES"
Index: keyutils/tests/keyctl/padd/useradd/runtest.sh
===================================================================
--- keyutils.orig/tests/keyctl/padd/useradd/runtest.sh
+++ keyutils/tests/keyctl/padd/useradd/runtest.sh
@@ -40,10 +40,7 @@ expect_payload payload "lizard"
 marker "UNLINK KEY"
 unlink_key $keyid @s
 
-if [ $skip_root_required = 0 ] && {
-        [ $OSDIST = RHEL ] && ! version_less_than $OSRELEASE 6.6 ||
-        keyutils_at_or_later_than 1.5.6 ;
-        }
+if [ $skip_root_required = 0 ] && keyutils_at_or_later_than 1.5.6
 then
     # add keys with huge payloads
     old_root_quota=`cat /proc/sys/kernel/keys/root_maxbytes`
